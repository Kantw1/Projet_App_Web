<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Connexion avec Code</title>
    <link rel="stylesheet" href="connectionlogin.css">
</head>
<body>
<div class="container">
  <h1>Agenda Collaboratif - CY'Calender</h1>
  <h2> Avez-vous déjà un compte ? </h2>
  <form id="loginForm" action="login.php" method="post">
    <div class="form-group">
      <label for="username">Username:</label>
      <input type="text" id="username" name="username" required/>
    </div>
    <div class="form-group">
      <label for="pass" id="pass-label">Password (8 characters minimum):</label>
      <input type="password" id="pass" name="password" minlength="8" required />
    </div>
    <div class="form-group">
      <input type="submit" value="Sign in"/>
    </div>
  </form>

  <!-- Afficher le bouton "Continuer avec le compte" si l'utilisateur s'est déjà connecté -->
  <button id="continueBtn" style="display:none;">Continuer avec le compte</button>

  <!-- Lien pour ouvrir le formulaire de création de compte dans une autre page -->
  <h2> Créer un compte </h2>
  <a href="signup.html">Créer un compte</a>
</div>

<!-- Logo PNG -->
<div class="logo">
    <img src="cy.png" alt="Logo" width="150" height="auto"/>
</div>

<!-- Créateurs du site -->
<footer class="creators">
    <p>Réalisé par Quentin FOURRIER, Baptiste ROBARD et Lucas ROBERT</p>
</footer>

<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Connexion avec Code</title>
    <link rel="stylesheet" href="connectionlogin.css">
</head>
<body>
<div class="container">
  <h1>Agenda Collaboratif - CY'Calender</h1>
  <h2> Avez-vous déjà un compte ? </h2>
  <form id="loginForm" action="login.php" method="post">
    <div class="form-group">
      <label for="username">Username:</label>
      <input type="text" id="username" name="username" required/>
    </div>
    <div class="form-group">
      <label for="pass" id="pass-label">Password (8 characters minimum):</label>
      <input type="password" id="pass" name="password" minlength="8" required />
    </div>
    <div class="form-group">
      <input type="submit" value="Sign in"/>
    </div>
  </form>

  <!-- Afficher le bouton "Continuer avec le compte" si l'utilisateur s'est déjà connecté -->
  <button id="continueBtn" style="display:none;">Continuer avec le compte</button>

  <!-- Lien pour ouvrir le formulaire de création de compte dans une autre page -->
  <h2> Créer un compte </h2>
  <a href="signup.html">Créer un compte</a>
</div>

<!-- Logo PNG -->
<div class="logo">
    <img src="cy.png" alt="Logo" width="150" height="auto"/>
</div>

<!-- Créateurs du site -->
<footer class="creators">
    <p>Réalisé par Quentin FOURRIER, Baptiste ROBARD et Lucas ROBERT</p>
</footer>

<!-- Copyright -->
<footer class="copyright">
    <p>&copy; 2024 <a href="https://www.youtube.com/watch?v=ZRTNHDd0gL8&ab_channel=AdamOndra">CY'Calender</a>. Tous droits réservés.</p>
</footer>

<!-- Script JavaScript pour gérer l'acceptation des cookies -->
<script>
function acceptCookies() {
    document.cookie = "cookie_accepted=true; expires=Fri, 31 Dec 9999 23:59:59 GMT; path=/";
    document.getElementById("cookie-consent").style.display = "none";
}

// Vérifie si l'utilisateur est déjà connecté et affiche le bouton "Continuer avec le compte"
window.onload = function() {
    var device_id = '<?php echo isset($_COOKIE['device_id']) ? $_COOKIE['device_id'] : ''; ?>';
    if (device_id) {
        document.getElementById("continueBtn").style.display = "block";
    }
}

// Redirige vers Agenda.html avec les données de connexion si l'utilisateur continue avec son compte
document.getElementById("continueBtn").addEventListener("click", function() {
    var username = document.getElementById("username").value;
    var password = document.getElementById("pass").value;
    document.cookie = "username=" + username;
    document.cookie = "password=" + password;
    window.location.href = "Agenda.html";
});
</script>

<!-- Message pour accepter les cookies -->
<div id="cookie-consent" class="cookie-consent" style="display: block;">
    <p>Ce site utilise des cookies pour améliorer l'expérience utilisateur. En continuant à naviguer sur ce site, vous acceptez l'utilisation de cookies.</p>
    <button onclick="acceptCookies()">Accepter les cookies</button>
</div>

</body>
</html>
